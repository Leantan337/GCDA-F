{% load wagtailcore_tags wagtailimages_tags %}
{% for news_item in news_items %}
  <div class="news-item">
    <div class="news-image">
      {% if news_item.featured_image %}
        {% image news_item.featured_image fill-400x300 as photo %}
        <img src="{{ photo.url }}" alt="{{ news_item.title }}">
      {% else %}
        <img src="/static/assets/img/news/default.jpg" alt="No Image">
      {% endif %}
    </div>
    <div class="news-content">
      <div class="news-meta">
        <span class="news-date">{{ news_item.date|date:"d M Y" }}</span>
        {% if news_item.category %}
          <span class="news-location">{{ news_item.category }}</span>
        {% endif %}
      </div>
      <h3 class="news-title">{{ news_item.title }}</h3>
      <p class="news-excerpt">{{ news_item.intro|truncatewords:30 }}</p>
      <a href="{% pageurl news_item %}" class="read-more">Read More</a>
    </div>
  </div>
{% endfor %}
